BEGIN TRANSACTION;
CREATE TABLE IF NOT EXISTS "exibicao_sala" (
	"id_filme"	INTEGER,
	"numero_sala"	INTEGER,
	FOREIGN KEY("id_filme") REFERENCES "filme"("id"),
	PRIMARY KEY("id_filme","numero_sala"),
	FOREIGN KEY("numero_sala") REFERENCES "sala"("num_sala")
);
CREATE TABLE IF NOT EXISTS "filme" (
	"id"	INTEGER,
	"titulo"	TEXT,
	"classificacao"	TEXT,
	"duracao"	TEXT CHECK("duracao" GLOB '[0-5][0-9]:[0-5][0-9]:[0-5][0-9]'),
	"status"	TEXT CHECK(("status" IN ('EM_CARTAZ', 'EM_BREVE', 'ARQUIVADO'))),
	PRIMARY KEY("id" AUTOINCREMENT)
);
CREATE TABLE IF NOT EXISTS "genero" (
	"id"	INTEGER,
	"nome"	TEXT,
	PRIMARY KEY("id" AUTOINCREMENT)
);
CREATE TABLE IF NOT EXISTS "filme_genero" (
	"id_filme"	INTEGER,
	"id_genero"	INTEGER,
	PRIMARY KEY("id_filme","id_genero"),
	FOREIGN KEY("id_filme") REFERENCES "filme"("id"),
	FOREIGN KEY("id_genero") REFERENCES "genero"("id")
);
CREATE TABLE IF NOT EXISTS "sala" (
	"num_sala"	INTEGER,
	"capacidade"	INTEGER,
	"status"	TEXT CHECK("status" IN ('INATIVO', 'ATIVO')),
	PRIMARY KEY("num_sala" AUTOINCREMENT)
);
INSERT INTO "sala" VALUES (1,50,'ATIVO');
INSERT INTO "sala" VALUES (2,60,'ATIVO');
COMMIT;
